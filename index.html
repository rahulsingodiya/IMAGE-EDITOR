<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <!-- <link rel="stylesheet" href="../assets/css/materialize.min.css" /> -->
    <link rel="stylesheet" href="assets/css/grid.css" />
    <link rel="stylesheet" href="assets/css/spacing.css" />
    <link rel="stylesheet" href="assets/css/utility.css" />
    <link rel="stylesheet" href="assets/icon/all.css" />
    <link rel="stylesheet" href="style.css" />
    <style>
        #MainImageContainer {
            /* width: 650px;
        height: 650px; */
            width: 650px;
            height: 650px;
            border: 1px solid #00FFFF55;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: #00032B;
        }

        #ImageContainer {
            position: relative;
            margin: auto;
            overflow: hidden;
            
        }

        #ImageContainer img {
            /* position: absolute; */
            width: 100%;
            height: 100%;
            
            /* object-fit: contain; */
        }

        #ImageContainer p {
            position: absolute;
            top: 40%;
            left: 40%;
            width: auto;
            max-width: 90%;
            height: auto;
            padding: 1rem;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: move;
            user-select: none;
            color: #000;
            overflow: hidden;
            text-align: center;
            /* display: none; */
        }

        #ImageContainer p.text_shadow {
            text-shadow: 0px 0px 2px #444444;
        }

        #ImageContainer p:hover {
            box-shadow: 1px 1px 10px #999;
            border: 1px dashed #FFF;
        }

        @media screen and (max-width: 1024px) {
            #MainImageContainer {
                width: 550px;
                height: 550px;
            }
        }

        @media screen and (max-width: 993px) {
            #MainImageContainer {
                width: 100%;
                border: 1px solid #aaa;
            }
        }
    </style>
</head>

<body>
    <div class="row">
        <div class="col s12 xl12">
            <div class="row">
                <div class="col s12 l7 offset-l1 xl7 offset-xl1">
                    <div id="MainImageContainer">
                        <div id="ImageContainer" class="active">
                            <img src="http://127.0.0.1:5500/EDITOR/1.jpeg" alt="" id="img-file" />
                            <p>Lorem ipsum Dolor sit amet.</p>
                        </div>
                    </div>
                    <!--  -->
                    <!-- <div id="main-image">
                        <img src="1.jpeg" alt="" id="img-file" class="" />
                    </div> -->
                </div>
                <div class="col s12 l3 xl3 py-4 px-4">
                    <div class="row">
                        <div class="col s12 p-0">
                            <div id="file-upload">
                                <input type="file" name="" id="upload-file" />
                                <span>FILE UPLOAD</span>
                            </div>
                        </div>
                    </div>
                    <div class="row text-center" id="tools">
                        <div class="col s3">
                            <i class="fa fa-snowflake" title="FILTER" id="btn_filter"></i>
                        </div>
                        <div class="col s3">
                            <i class="fa fa-adjust" title="EFFECT" id="btn_effect"></i>
                        </div>
                        <div class="col s3">
                            <i class="fa fa-object-group" title="TRANSFORM" id="btn_transform"></i>
                        </div>
                        <div class="col s3">
                            <i class="fa fa-font" title="TEXT" id="btn_text"></i>
                        </div>
                    </div>
                    <div class="row" id="reset_save">
                        <div class="col s6 pl-0">
                            <div class="btn" id="btn_reset">RESET</div>
                        </div>
                        <div class="col s6 pr-0">
                            <div class="btn" id="btn_save">SAVE</div>
                        </div>
                    </div>
                    <div class="row" style="display: none;" id="filter">
                        <h3 class="text-center">FILTER</h3>
                        <form id="filter_form">
                            <div class="row" style="display: flex; align-items: center;">
                                <div class="col s3">
                                    Grayscale
                                </div>
                                <div class="col s9">
                                    <input id="gs" name="gs" type="range" min="0" max="100" value="0" class="progress">
                                </div>
                            </div>
                            <div class="row" style="display: flex; align-items: center;">
                                <div class="col s3">
                                    Blur
                                </div>
                                <div class="col s9">
                                    <input id="blur" name="blur" type="range" min="0" max="10" value="0"
                                        class="progress">
                                </div>
                            </div>
                            <div class="row" style="display: flex; align-items: center;">
                                <div class="col s3">
                                    Exposure
                                </div>
                                <div class="col s9">
                                    <input id="br" name="br" type="range" min="0" max="200" value="100"
                                        class="progress">
                                </div>
                            </div>
                            <div class="row" style="display: flex; align-items: center;">
                                <div class="col s3">
                                    Contrast
                                </div>
                                <div class="col s9">
                                    <input id="ct" name="ct" type="range" min="0" max="200" value="100"
                                        class="progress">
                                </div>
                            </div>
                            <div class="row" style="display: flex; align-items: center;">
                                <div class="col s3">
                                    Hue
                                </div>
                                <div class="col s9">
                                    <input id="huer" name="huer" type="range" min="0" max="360" value="0"
                                        class="progress">
                                </div>
                            </div>
                            <div class="row" style="display: flex; align-items: center;">
                                <div class="col s3">
                                    Opacity
                                </div>
                                <div class="col s9">
                                    <input id="opacity" name="opacity" type="range" min="0" max="100" value="100"
                                        class="progress">
                                </div>
                            </div>
                            <div class="row" style="display: flex; align-items: center;">
                                <div class="col s3">
                                    Invert
                                </div>
                                <div class="col s9">
                                    <input id="invert" name="invert" type="range" min="0" max="100" value="0"
                                        class="progress">
                                </div>
                            </div>
                            <div class="row" style="display: flex; align-items: center;">
                                <div class="col s3">
                                    Saturate
                                </div>
                                <div class="col s9">
                                    <input id="saturate" name="saturate" type="range" min="0" max="500" value="100"
                                        class="progress">
                                </div>
                            </div>
                            <div class="row" style="display: flex; align-items: center;">
                                <div class="col s3">
                                    Sepia
                                </div>
                                <div class="col s9">
                                    <input id="sepia" name="sepia" type="range" min="0" max="100" value="0"
                                        class="progress">
                                </div>
                            </div>
                        </form>
                    </div>
                    <div class="row" style="display: none;" id="effect">
                    </div>
                    <div class="row" style="display: none;" style="" id="transform">
                        <h3 class="text-center">TRANSFORM</h3>
                        <div class="row">
                            <div class="col s12 mb-3">
                                <div class="btn transform_tool" data-value="mirror">
                                    <i class="fa fa-shield-alt mr-2"></i>
                                    <span>MIRROR</span>
                                </div>
                            </div>
                            <div class="col s12 mb-3">
                                <div class="btn transform_tool" data-value="flip">
                                    <i class="fa fa-hourglass-start mr-2"></i>
                                    <span>FLIP</span>
                                </div>
                            </div>
                            <div class="col s12 mb-3">
                                <div class="btn transform_tool" data-value="mirror-flip">
                                    <i class="fa fa-cube mr-2" aria-hidden="true"></i>
                                    <span>BOTH</span>
                                </div>
                            </div>
                            <div class="col s12 mb-3">
                                <div class="btn transform_tool" data-value="rotate-90">
                                    <i class="fa fa-redo mr-2" aria-hidden="true"></i>
                                    <span>ROTATE</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row" id="text_editor">
                        <h3 class="text-center">TEXT</h3>
                        <div class="row text-center">
                            <div class="col s12 mb-3">
                                <textarea name="" id="" cols="30" rows="10" placeholder="ENTER TEXT"></textarea>
                            </div>
                            <div class="col s6 text-center">
                                <div class="btn" id="btn_add_text">ADD TEXT</div>
                            </div>
                            <div class="col s6 text-center">
                                <div class="btn" id="btn_remove_text">REMOVE</div>
                            </div>
                        </div>
                        <div class="row mx-0 text-center" id="text_format">
                            <div class="col s12">TEXT FORMAT</div>
                            <div class="col s6" title="Font Family">
                                <select name="" id="text-font-family">
                                    <option value="1">1</option>
                                </select>
                            </div>
                            <div class="col s3" title="Font Size">
                                <select name="" id="text-font-size">
                                    <option value="1">1</option>
                                </select>
                            </div>
                            <div class="col s3" title="Text Case">
                                <!-- <i class="fa" id="text-case">Aa</i> -->
                                <select name="" id="text-case">
                                    <option value="" selected disabled>Aa</option>
                                    <option value="capitalize">Capitalize</option>
                                    <option value="lowercase">lowercase</option>
                                    <option value="uppercase">UPPERCASE</option>
                                    <option value="unset">unset</option>
                                </select>
                            </div>
                            <div class="col s3" title="Text Bold">
                                <i class="fa fa-bold" id="text-bold"></i>
                            </div>
                            <div class="col s3" title="Text Italic">
                                <i class="fa fa-italic" id="text-italic"></i>
                            </div>
                            <div class="col s3" title="Text Underline">
                                <i class="fa fa-underline" id="text-underline"></i>
                            </div>
                            <div class="col s3" title="Text Shadow">
                                <i class="fa " id="text-shadow">S</i>
                            </div>
                            <div class="col s3" title="Text Color">
                                <i class="fa fa-tint color_picker" id="color_picker1">
                                    <input type="color" name="" id="text-color">
                                </i>
                            </div>
                            <div class="col s3" title="Text Background">
                                <i class="fa fa-shopping-bag color_picker" id="color_picker2">
                                    <input type="color" name="" id="text-background">
                                </i>
                            </div>
                            <div class="col s3" title="Remove Text Background">
                                <i class="fa fa-shopping-bag" id="remove-background">
                                </i>
                            </div>
                            <div class="col s3" title="Letter Spacing">
                                <select name="" id="text-spacing">
                                    <option value="" selected disabled>
                                        &#8596;
                                    <option value="-1">Tight</option>
                                    <option value="0">Normal</option>
                                    <option value="1">Loose</option>
                                    <option value="3">very Loose</option>
                                </select>
                            </div>

                        </div>
                    </div>
                </div>
                <div class="col s12 l4 py-4"></div>
            </div>
        </div>
        <div class="col s12">
            <div id="previewImage"></div>
        </div>
    </div>
    <!-- <script src="../assets/js/materialize.min.js"></script> -->
    <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script> -->
    <script src="assets/js/jquery-3.4.1.js"></script>
    <script src="drag_drop.js"></script>
    <script src="html2canvas.min.js"></script>
    <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/0.5.0-beta4/html2canvas.js"></script> -->
    <script>
        const MainImg = document.querySelector("#img-file");
        const ImageContainer = document.querySelector('#ImageContainer');
        const UploadFile = document.querySelector("#upload-file");
        var FileWidth, FileHeight;
        window.addEventListener('resize', function () {
            ImageContainerResize();
        })
        ImageContainerResize();

        function ImageContainerResize() {
            if (document.getElementById("MainImageContainer").offsetWidth < 550) {
                document.getElementById("MainImageContainer").style.height =
                    document.getElementById("MainImageContainer").offsetWidth + "px";
            } else {
                document.getElementById("MainImageContainer").removeAttribute('style');
            }
        }

        var _URL = window.URL || window.webkitURL;
        UploadFile.onchange = (event) => {
            var reader = new FileReader();
            reader.onload = function () {
                img = new Image();
                img.onload = function () {
                    FileWidth = this.width;
                    FileHeight = this.height;
                    // console.log(this.width + " " + this.height);
                    // _URL.revokeObjectURL(objectURL);
                    ImgResize();
                    loadEffect(MainImg.src);
                }
                img.src = reader.result;
                MainImg.src = reader.result;
                
            };
            reader.readAsDataURL(event.target.files[0]);

            // img = new Image();
            // var objectURL = _URL.createObjectURL(event.target.files[0]);
            // img.onload = function () {
            //     FileWidth = this.width;
            //     FileHeight = this.height;
            //     console.log(this.width + " " + this.height);
            //     _URL.revokeObjectURL(objectURL);
            //     ImgResize();
            // }
            // img.src = objectURL;
            // MainImg.src = objectURL;


        };


        function ImgResize() {
            if (FileWidth >= FileHeight) {
                ImageContainer.style.width = "90%";
                ImageContainer.style.height = "auto";
            } else {
                ImageContainer.style.height = "90%";
                ImageContainer.style.width = "auto";
            }
            
        }

    </script>
    <script src="script.js"></script>
</body>

</html>